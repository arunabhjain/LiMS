(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,s){},117:function(e,t,s){},185:function(e,t,s){},186:function(e,t,s){},187:function(e,t,s){},190:function(e,t,s){},191:function(e,t,s){"use strict";s.r(t);var r=s(2),n=s.n(r),a=s(25),o=s.n(a),c=(s(116),s(8)),i=s(60),l=s(13),d=s(14),j=s(9),h=s(15),u=s(16),b=(s(117),s(108)),m=s(192),O=s(193),x=s(194),p=s(195),g=s(196),f=s(197),v=s(219),N=s(200),k=s(201),w=s(202),y=s(203),M=s(204),E=s(205),S=s(198),L=s(220),C=s(221),D=s(199),A=s(11),I=s(7),F=s(0),R=function(e){return e&&e.length},T=function(e){return function(t){return!t||t.length<=e}},B=function(e){return function(t){return t&&t.length>=e}},q=function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)};function _(e){return!1===e.isSignedIn?Object(F.jsxs)(n.a.Fragment,{children:["\xa0 \xa0",Object(F.jsxs)(b.a,{className:"navigation-btn",outline:!0,onClick:e.toggleRegister,children:["Register ",Object(F.jsx)("span",{className:"fa fa-user-plus fa-lg"})]})]}):Object(F.jsx)(n.a.Fragment,{})}var U=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={isNavOpen:!1,isModalOpen:!1,isRegisterOpen:!1,dropdownOpen:!1},r.toggleModal=r.toggleModal.bind(Object(j.a)(r)),r.toggleNav=r.toggleNav.bind(Object(j.a)(r)),r.handleLogin=r.handleLogin.bind(Object(j.a)(r)),r.handleLogout=r.handleLogout.bind(Object(j.a)(r)),r.toggleRegister=r.toggleRegister.bind(Object(j.a)(r)),r.toggle=r.toggle.bind(Object(j.a)(r)),r}return Object(d.a)(s,[{key:"toggle",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"toggleNav",value:function(){window.innerWidth<1200&&this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"toggleRegister",value:function(e){this.setState({isRegisterOpen:!this.state.isRegisterOpen})}},{key:"handleLogin",value:function(e){this.toggleModal(),this.props.loginUser({username:this.username.value,password:this.password.value}),e.preventDefault()}},{key:"handleLogout",value:function(){this.props.logoutUser()}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"render",value:function(){var e=this;return Object(F.jsxs)(n.a.Fragment,{children:[Object(F.jsxs)(m.a,{dark:!0,expand:"xl",className:"navigator-class",children:[Object(F.jsx)(O.a,{onClick:this.toggleNav}),Object(F.jsx)(x.a,{className:"mr-auto",href:"/home",children:Object(F.jsx)("img",{src:"library-logo.png",height:40,alt:"",className:"logo-class"})}),Object(F.jsxs)(p.a,{isOpen:this.state.isNavOpen,navbar:!0,children:[Object(F.jsxs)(g.a,{navbar:!0,children:[Object(F.jsx)(f.a,{className:"ml-2",onClick:this.toggleNav,children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/home",children:[Object(F.jsx)("span",{className:"fa fa-home fa-lg"})," Home"]})}),Object(F.jsx)(f.a,{className:"ml-2",onClick:this.toggleNav,children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/about",children:[Object(F.jsx)("span",{className:"fa fa-info-circle fa-lg"})," About"]})}),this.props.auth.userinfo&&this.props.auth.userinfo.admin?Object(F.jsx)(f.a,{children:Object(F.jsxs)(S.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle,children:[Object(F.jsx)(L.a,{className:"admin-dropdown",children:Object(F.jsxs)("div",{className:"admin-dropdown-all",children:[Object(F.jsx)("span",{className:"fa fa-book fa-lg"}),"\xa0Books \xa0",Object(F.jsx)("i",{className:"fa fa-caret-down fa-sm","aria-hidden":"true"})]})}),Object(F.jsxs)(C.a,{children:[Object(F.jsx)(D.a,{onClick:this.toggleNav,tag:A.b,to:"/books",children:"Modify books"}),Object(F.jsx)(D.a,{onClick:this.toggleNav,tag:A.b,to:"/add_book",children:"Add books"})]})]})}):Object(F.jsx)(f.a,{className:"ml-2",onClick:this.toggleNav,children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/books",children:[Object(F.jsx)("span",{className:"fa fa-book fa-lg"})," Books"]})}),Object(F.jsx)(f.a,{className:"ml-2",onClick:this.toggleNav,children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/search",children:[Object(F.jsx)("span",{className:"fa fa-search fa-lg"})," Search"]})}),this.props.auth.isAuthenticated?Object(F.jsx)(f.a,{onClick:this.toggleNav,className:"ml-2",children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/profile",children:[Object(F.jsx)("span",{className:"fa fa-user-circle-o fa-lg"})," My Profile"]})}):Object(F.jsx)("div",{}),this.props.auth.isAuthenticated&&!this.props.auth.userinfo.admin?Object(F.jsx)(f.a,{onClick:this.toggleNav,className:"ml-2",children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/history",children:[Object(F.jsx)("span",{className:"fa fa-history"})," Issue history"]})}):Object(F.jsx)("div",{}),this.props.auth.isAuthenticated&&this.props.auth.userinfo.admin?Object(F.jsxs)(n.a.Fragment,{children:[Object(F.jsx)(f.a,{onClick:this.toggleNav,className:"ml-2",children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/issue",children:[Object(F.jsx)("span",{className:"fa fa-plus-square"})," Issue Book"]})}),Object(F.jsx)(f.a,{onClick:this.toggleNav,className:"ml-2",children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/return",children:[Object(F.jsx)("span",{className:"fa fa-list-ul"})," Return Book"]})}),Object(F.jsx)(f.a,{onClick:this.toggleNav,className:"ml-2",children:Object(F.jsxs)(A.c,{className:"nav-link text-primary",to:"/stats",children:[Object(F.jsx)("span",{className:"fa fa-info-circle"})," Stats"]})})]}):Object(F.jsx)("div",{})]}),Object(F.jsx)(g.a,{className:"ml-auto",navbar:!0,children:Object(F.jsxs)(f.a,{children:[this.props.auth.isAuthenticated?Object(F.jsxs)("div",{className:"second-link",children:[Object(F.jsxs)("div",{style:{color:"white",fontSize:15,textShadow:"2px 2px 5px black"},className:"navbar-text mr-3",children:[this.props.auth.userinfo.firstname.toUpperCase(),"\xa0",this.props.auth.userinfo.lastname.toUpperCase()]}),Object(F.jsxs)(b.a,{outline:!0,className:"navigation-btn",onClick:this.handleLogout,children:["Logout ",Object(F.jsx)("span",{className:"fa fa-sign-out fa-lg"}),this.props.auth.isLoading?Object(F.jsx)("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null]})]}):Object(F.jsxs)(b.a,{outline:!0,className:"navigation-btn",onClick:this.toggleModal,children:["Login ",Object(F.jsx)("span",{className:"fa fa-sign-in fa-lg"}),this.props.auth.isLoading?Object(F.jsx)("span",{className:"fa fa-spinner fa-pulse fa-fw"}):null]}),Object(F.jsx)(_,{isSignedIn:this.props.auth.isAuthenticated,toggleRegister:function(){e.toggleRegister()}})]})})]})]}),Object(F.jsxs)(v.a,{isOpen:!this.props.auth.isAuthenticated&&this.state.isModalOpen,toggle:this.toggleModal,children:[Object(F.jsx)(N.a,{toggle:this.toggleModal,children:"Sign In"}),Object(F.jsx)(k.a,{children:Object(F.jsxs)(w.a,{onSubmit:this.handleLogin,children:[Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"username",children:"Username"}),Object(F.jsx)(E.a,{type:"text",id:"username",name:"username",innerRef:function(t){return e.username=t}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"password",children:"Password"}),Object(F.jsx)(E.a,{type:"password",id:"password",name:"password",innerRef:function(t){return e.password=t}})]}),Object(F.jsx)(b.a,{type:"submit",value:"submit",color:"primary",children:"Login"})]})})]}),Object(F.jsxs)(v.a,{isOpen:this.state.isRegisterOpen,toggle:this.toggleRegister,children:[Object(F.jsx)(N.a,{toggle:this.toggleRegister,children:"Register"}),Object(F.jsx)(k.a,{children:Object(F.jsxs)(I.LocalForm,{model:"user",onSubmit:function(t){e.toggleRegister(),e.props.registerUser({username:t.username,password:t.password,email:t.email,roll:t.roll,firstname:t.firstname,lastname:t.lastname})},children:[Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"username",children:"Username"}),Object(F.jsx)(I.Control.text,{model:".username",id:"username",name:"username",className:"form-control",placeholder:"Username",validators:{required:R,minLength:B(3),maxLength:T(20)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".username",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"password",children:"Password"}),Object(F.jsx)(I.Control.password,{model:".password",id:"password",name:"password",className:"form-control",placeholder:"password",validators:{required:R,minLength:B(6),maxLength:T(20)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".password",show:"touched",messages:{required:"Required",minLength:" Must be greater than 5 characters",maxLength:" Must be 20 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"firstname",children:"First Name"}),Object(F.jsx)(I.Control.text,{model:".firstname",id:"firstname",name:"firstname",className:"form-control",placeholder:"firstname",validators:{required:R,minLength:B(3),maxLength:T(20)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".firstname",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"lastname",children:"Last Name"}),Object(F.jsx)(I.Control.text,{model:".lastname",id:"lastname",name:"lastname",className:"form-control",placeholder:"lastname",validators:{required:R,minLength:B(3),maxLength:T(20)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".lastname",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"roll",children:"Roll No."}),Object(F.jsx)(I.Control.text,{model:".roll",id:"roll",name:"roll",className:"form-control",placeholder:"roll",validators:{required:R,minLength:B(3),maxLength:T(12)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".roll",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 12 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"email",children:"E-mail"}),Object(F.jsx)(I.Control.text,{model:".email",id:"email",name:"email",className:"form-control",placeholder:"email",validators:{required:R,validEmail:q}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".email",show:"touched",messages:{required:"Required",validEmail:" Enter a valid email"}})]}),Object(F.jsx)(b.a,{type:"submit",value:"submit",color:"primary",children:"Sign Up"})]})})]})]})}}]),s}(r.Component);s(185);var P=function(){return Object(F.jsxs)("div",{className:"homepage-main",children:[Object(F.jsx)("div",{className:"dark-bg"}),Object(F.jsx)("img",{src:"lims-circle.png",height:300,alt:""}),Object(F.jsx)("p",{children:"GyanKund is a very useful library of SKIT that brings together people willing to learn. It helps us in learning and expanding our knowledge. You can develop your reading habits here and satisfy your thirst and curiosity for knowledge. Reading books helps in the personal growth and development of a person."}),Object(F.jsx)("p",{children:"GyanKund Library provides authentic and reliable sources of information for both students and teachers. They are able to complete their papers and carry out their studies using the material present in the library. In short, it is a great place for studying alone or even in groups, without any disturbance."})]})},V=s(206),J=function(){return Object(F.jsxs)("div",{className:"col-12 heading justify-content-center loading",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsxs)("h1",{align:"center",children:[Object(F.jsx)("span",{className:"fa fa-spinner fa-pulse fa-3x fa-fw text-primary"}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),"Loading ...."]})]})};function K(e){var t=e.book,s=e.changeSelected,r=e.isAdmin,a=e.toggleDeleteModal,o=e.toggleEditModal,c=e.i;return Object(F.jsxs)(n.a.Fragment,{children:[Object(F.jsx)("td",{children:c}),Object(F.jsx)("td",{children:Object(F.jsx)(A.b,{to:"/books/".concat(t._id),children:t.name})}),Object(F.jsx)("td",{children:t.isbn}),Object(F.jsx)("td",{children:t.author}),Object(F.jsx)("td",{children:t.copies}),r?Object(F.jsxs)("td",{children:[Object(F.jsx)("span",{onClick:function(){s(t._id),o()},className:"Option fa fa-pencil"}),"\xa0 \xa0"," ",Object(F.jsx)("span",{onClick:function(){s(t._id),a()},className:"Option fa fa-trash"})]}):Object(F.jsx)(n.a.Fragment,{})]})}var Y=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props.books.map((function(t){return Object(F.jsx)("tr",{children:Object(F.jsx)(K,{book:t,isAdmin:e.props.isAdmin,changeSelected:e.props.changeSelected,toggleDeleteModal:e.props.toggleDeleteModal,toggleEditModal:e.props.toggleEditModal,i:e.i++})},t.name)}));return this.props.booksLoading?Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})}):this.props.booksErrMess?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.booksErrMess})]})})}):Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsxs)("div",{className:"col-12 heading",children:[Object(F.jsx)("h3",{align:"center",children:"List of All books"}),Object(F.jsxs)(V.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:"S.No."}),Object(F.jsx)("th",{children:"Name of Book"}),Object(F.jsx)("th",{children:"ISBN number"}),Object(F.jsx)("th",{children:"Authors"}),Object(F.jsx)("th",{children:"Copies available"}),this.props.isAdmin?Object(F.jsxs)("th",{children:["Edit / ",Object(F.jsx)("br",{}),"Delete"]}):Object(F.jsx)(n.a.Fragment,{})]})}),Object(F.jsx)("tbody",{children:t})]})]})})})}}]),s}(r.Component),G=s(207),z=s(208),Z=s(209),W=s(210),$=s(211),H=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={name:"",author:"",cat:["Romance","Technology","Computer Science","Management","Electronics","Physics","Chemistry","Mathematics","Fiction","Philosophy","Language","Arts","Other"]},r.onChange=r.onChange.bind(Object(j.a)(r)),r}return Object(d.a)(s,[{key:"onChange",value:function(e){var t=this.state.cat,s=-1;if(e.target.checked)t.push(e.target.value);else{for(var r=0;r<t.length;r++)if(t[r]===e.target.value){s=r;break}t.splice(s,1)}this.setState({cat:t})}},{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=["warning","danger","success","info","secondary"],s=new RegExp(this.state.name,"i"),r=new RegExp(this.state.author,"i"),a=this.props.books.map((function(a){var o=e.state.cat.some((function(e){return e===a.cat}));return-1!==a.name.search(s)&&-1!==a.author.search(r)&&o?Object(F.jsxs)(G.a,{children:[Object(F.jsx)(A.b,{to:"/books/".concat(a._id),children:Object(F.jsx)("b",{children:"".concat(a.name,"  ")})}),Object(F.jsxs)(z.a,{color:t[a.cat.length%5],pill:!0,children:[" ",a.cat]}),e.props.isAdmin?Object(F.jsxs)(n.a.Fragment,{children:["\xa0 \xa0",Object(F.jsx)("span",{onClick:function(){e.props.changeSelected(a._id),e.props.toggleEditModal()},className:"Option fa fa-pencil"}),"  ","\xa0 \xa0"," ",Object(F.jsx)("span",{onClick:function(){e.props.changeSelected(a._id),e.props.toggleDeleteModal()},className:"Option fa fa-trash"})]}):Object(F.jsx)(n.a.Fragment,{}),Object(F.jsx)("br",{})," ",Object(F.jsxs)("p",{className:"ml-auto",children:[" Authors : ","    ".concat(a.author)]}),Object(F.jsxs)("p",{children:[" ",a.copies," Copies available"]}),Object(F.jsxs)("p",{children:["Location : "," Floor- ".concat(a.floor,", Shelf- ").concat(a.shelf)]})]},a._id):Object(F.jsx)(n.a.Fragment,{})}));return this.props.booksLoading?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})}):this.props.booksErrMess?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.booksErrMess})]})})}):Object(F.jsxs)("div",{className:"container loading",children:[Object(F.jsx)("div",{className:"row",children:Object(F.jsxs)("div",{className:"col-12 heading",children:[Object(F.jsx)("h3",{align:"center",children:"Search your book here : "}),Object(F.jsxs)(w.a,{children:[Object(F.jsxs)(Z.a,{form:!0,children:[Object(F.jsx)(W.a,{md:6,children:Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{for:"name",children:"Name of book"}),Object(F.jsx)(E.a,{type:"name",name:"name",id:"name",value:this.state.name,onChange:function(t){e.setState({name:t.target.value})},placeholder:"Enter name of the book"})]})}),Object(F.jsx)(W.a,{md:6,children:Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{for:"author",children:"Author"}),Object(F.jsx)(E.a,{type:"author",name:"author",id:"author",value:this.state.author,onChange:function(t){e.setState({author:t.target.value})},placeholder:"Enter name of author"})]})})]}),Object(F.jsx)(Z.a,{children:Object(F.jsxs)(W.a,{sm:6,md:2,children:["Category :"," "]})}),Object(F.jsxs)(y.a,{check:!0,children:[Object(F.jsxs)(Z.a,{children:[Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"romance",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"romance",value:"Romance",name:"cat"}),"Romance"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"fiction",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"fiction",value:"Fiction",name:"cat"}),"Fiction"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"Arts",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Arts",value:"Arts",name:"cat"}),"Arts"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"computer",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"computer",value:"Computer Science",name:"cat"}),"Computer Science"]})})]}),Object(F.jsxs)(Z.a,{children:[Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"management",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"management",value:"Management",name:"cat"}),"Management"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"Physics",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Physics",value:"Physics",name:"cat"}),"Physics"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"technology",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"technology",value:"Technology",name:"cat"}),"Technology"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"Philosophy",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Philosophy",value:"Philosophy",name:"cat"}),"Philosophy"]})})]}),Object(F.jsxs)(Z.a,{children:[Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"Mathematics",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Mathematics",value:"Mathematics",name:"cat"}),"Mathematics"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"Chemistry",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Chemistry",value:"Chemistry",name:"cat"}),"Chemistry"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"Electronics",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Electronics",value:"Electronics",name:"cat"}),"Electronics"]})}),Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"Language",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Language",value:"Language",name:"cat"}),"Language"]})})]}),Object(F.jsx)(Z.a,{children:Object(F.jsx)(W.a,{xs:6,md:3,children:Object(F.jsxs)(M.a,{check:!0,for:"Other",children:[Object(F.jsx)(E.a,{defaultChecked:!0,type:"checkbox",onChange:this.onChange,id:"Other",value:"Other",name:"cat"}),"Other"]})})})]})]})]})}),Object(F.jsx)("div",{className:"row",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)($.a,{children:a})]})}),Object(F.jsx)("br",{})]})}}]),s}(r.Component),Q=s(212),X=s(213),ee=s(214),te=s(215),se=s(216),re=s(217);function ne(e){var t=e.book,s=e.isAdmin,r=e.toggleEditModal,a=e.changeSelected;return null!=t?Object(F.jsxs)(Q.a,{children:[Object(F.jsxs)(X.a,{tag:"h3",children:[t.name," \xa0 \xa0 \xa0\xa0",s?Object(F.jsx)("span",{className:"fa fa-pencil Option",onClick:function(){a(t._id),r()}}):Object(F.jsx)(n.a.Fragment,{})]}),Object(F.jsxs)(ee.a,{children:[Object(F.jsxs)(te.a,{align:"right",children:[" - ",t.author]}),Object(F.jsxs)(se.a,{children:[Object(F.jsx)("b",{children:" Category: "})," ",t.cat," ",Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("b",{children:" ISBN number: "})," ",t.isbn," ",Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("b",{children:"Descrption: "}),Object(F.jsx)("br",{})," ",t.description," ",Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("b",{children:" Location: "})," ",Object(F.jsx)("br",{}),"Shelf no. ",t.shelf," ,",Object(F.jsx)("br",{}),0===t.floor?" Ground ":t.floor,1===t.floor?"st ":2===t.floor?"nd ":3===t.floor?"rd ":0===t.floor?"":"th ","Floor ",Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("b",{children:" Copies available : "})," ",t.copies]}),Object(F.jsx)("br",{})]}),Object(F.jsx)(re.a,{className:"text-muted",children:Object(F.jsxs)(Z.a,{children:[Object(F.jsxs)(W.a,{md:6,children:["Created at :"," ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(Date.parse(t.createdAt)))]}),Object(F.jsxs)(W.a,{md:6,children:["Last updated at :"," ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(Date.parse(t.updatedAt)))]})]})})]}):Object(F.jsx)("div",{})}var ae=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.isLoading?Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})}):this.props.errMess?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.errMess})]})})}):Object(F.jsx)("div",{className:"container full",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{})," ",Object(F.jsx)("br",{}),Object(F.jsx)(ne,{book:this.props.book,isAdmin:this.props.isAdmin,toggleEditModal:this.props.toggleEditModal,changeSelected:this.props.changeSelected}),Object(F.jsx)("br",{})]})})})}}]),s}(r.Component),oe=(s(186),function(e){return e&&e.length}),ce=function(e){return function(t){return!t||t.length<=e}},ie=function(e){return function(t){return t&&t.length>=e}},le=function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},de=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={isEditModalOpen:!1,isPasswordModalOpen:!1},r.toggleEditModal=r.toggleEditModal.bind(Object(j.a)(r)),r.togglePasswordModal=r.togglePasswordModal.bind(Object(j.a)(r)),r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"togglePasswordModal",value:function(){this.setState({isPasswordModalOpen:!this.state.isPasswordModalOpen})}},{key:"toggleEditModal",value:function(){this.setState({isEditModalOpen:!this.state.isEditModalOpen})}},{key:"render",value:function(){var e,t=this;return null===this.props.auth.userinfo?Object(F.jsx)("div",{className:"row heading",children:"Failed to fetch. Please reload the page"}):Object(F.jsx)("div",{className:"profile-main",children:Object(F.jsxs)("div",{className:"dark-bgm",children:[Object(F.jsx)("div",{style:{textAlign:"center"},children:Object(F.jsxs)(Q.a,{className:"heading",children:[Object(F.jsx)(X.a,{children:Object(F.jsx)("h3",{children:"Personal Details"})}),Object(F.jsxs)(ee.a,{children:[Object(F.jsxs)(se.a,{style:{textAlign:"left"},children:[Object(F.jsxs)("h5",{children:["First Name : ",this.props.auth.userinfo.firstname]}),Object(F.jsxs)("h5",{children:["Last Name : ",this.props.auth.userinfo.lastname]}),Object(F.jsxs)("h5",{children:[this.props.auth.userinfo.admin?"Admin ID":"Roll No."," : ",this.props.auth.userinfo.roll]}),Object(F.jsxs)("h5",{children:["Email : ",this.props.auth.userinfo.email]})]}),Object(F.jsxs)(b.a,{color:"info",onClick:this.toggleEditModal,style:{marginRight:10},children:["Edit \xa0",Object(F.jsx)("span",{className:"fa fa-pencil"})]}),this.props.auth.userinfo.admin?Object(F.jsx)("div",{}):Object(F.jsxs)(b.a,{color:"info",onClick:this.togglePasswordModal,children:["Change Password \xa0",Object(F.jsx)("span",{className:"fa fa-key"})]})]})]})}),Object(F.jsxs)(v.a,{isOpen:this.state.isEditModalOpen,toggle:this.toggleEditModal,children:[Object(F.jsx)(N.a,{toggle:this.toggleEditModal,children:"Edit Profile"}),Object(F.jsx)(k.a,{children:Object(F.jsxs)(I.LocalForm,{model:"user",onSubmit:function(e){t.toggleEditModal(),t.props.editUser(t.props.auth.userinfo._id,e.firstname,e.lastname,e.roll,e.email)},children:[Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"firstname",children:"First Name"}),Object(F.jsx)(I.Control.text,{model:".firstname",id:"firstname",name:"firstname",className:"form-control",defaultValue:this.props.auth.userinfo.firstname,placeholder:"firstname",validators:{required:oe,minLength:ie(3),maxLength:ce(20)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".firstname",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"lastname",children:"Last Name"}),Object(F.jsx)(I.Control.text,{model:".lastname",id:"lastname",name:"lastname",className:"form-control",defaultValue:this.props.auth.userinfo.lastname,placeholder:"lastname",validators:{required:oe,minLength:ie(3),maxLength:ce(20)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".lastname",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 20 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"roll",children:"Roll No."}),Object(F.jsx)(I.Control.text,{model:".roll",id:"roll",name:"roll",className:"form-control",defaultValue:this.props.auth.userinfo.roll,placeholder:"roll",validators:{required:oe,minLength:ie(3),maxLength:ce(12)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".roll",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",maxLength:" Must be 12 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"email",children:"E-mail"}),Object(F.jsx)(I.Control.text,{model:".email",id:"email",name:"email",defaultValue:this.props.auth.userinfo.email,className:"form-control",placeholder:"email",validators:{required:oe,validEmail:le}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".email",show:"touched",messages:{required:"Required",validEmail:" Enter a valid email"}})]}),Object(F.jsx)(b.a,{type:"submit",value:"submit",color:"primary",children:"Submit"})]})})]}),Object(F.jsxs)(v.a,{isOpen:this.state.isPasswordModalOpen,toggle:this.togglePasswordModal,children:[Object(F.jsx)(N.a,{toggle:this.togglePasswordModal,children:"Change Password"}),Object(F.jsx)(k.a,{children:Object(F.jsxs)(I.LocalForm,{model:"passwordform",onSubmit:function(e){e.newpassword===e.confirm?(t.togglePasswordModal(),t.props.editPassword(t.props.auth.userinfo._id,t.props.auth.user.username,e.newpassword)):alert("Your passwords didn't match. Please try again")},children:[Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"password",children:"Current Password"}),Object(F.jsx)(I.Control.password,{model:".password",id:"password",name:"password",className:"form-control",placeholder:"password",validators:{required:oe,minLength:ie(6),maxLength:ce(20),matchcreds:(e=this.props.auth.user.password,function(t){return t===e})}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".password",show:"touched",messages:{required:"Required",minLength:" Must be greater than 5 characters",maxLength:" Must be 20 characters or less",matchcreds:" Enter the correct password"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"newpassword",children:"New password"}),Object(F.jsx)(I.Control.password,{model:".newpassword",id:"newpassword",name:"newpassword",className:"form-control",placeholder:"New Password",validators:{required:oe,minLength:ie(6),maxLength:ce(20)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".newpassword",show:"touched",messages:{required:"Required",minLength:" Must be greater than 5 characters",maxLength:" Must be 20 characters or less"}})]}),Object(F.jsxs)(y.a,{children:[Object(F.jsx)(M.a,{htmlFor:"confirm",children:"Confirm Password"}),Object(F.jsx)(I.Control.password,{model:".confirm",id:"confirm",name:"confirm",className:"form-control",placeholder:"Re-enter the new password",validators:{required:oe,minLength:ie(6),maxLength:ce(20)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".confirm",show:"touched",messages:{required:"Required",minLength:" Must be greater than 5 characters",maxLength:" Must be 20 characters or less"}})]}),Object(F.jsx)(b.a,{type:"submit",value:"submit",color:"primary",children:"Submit"})]})})]})]})})}}]),s}(r.Component),je=function(e){return e&&e.length},he=function(e){return!!e},ue=function(e){return function(t){return t&&t.length>=e}},be=function(e){return function(t){return!t||t<=e}},me=function(e){return function(t){return t&&t>=e}},Oe=function(e){return!isNaN(Number(e))},xe=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e,t=this;return this.props.booksLoading?Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})}):this.props.booksErrMess?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.booksErrMess})]})})}):Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)("div",{className:"row justify-content-center heading",children:Object(F.jsx)("div",{className:"col-12",children:Object(F.jsx)("h3",{align:"center",children:" Add a book"})})}),Object(F.jsx)("div",{className:"row row-content justify-content-center",children:Object(F.jsxs)(I.LocalForm,{onSubmit:function(e){t.props.postBook(e.name,e.author,e.description,e.isbn,e.cat,e.floor,e.shelf,e.copies)},children:[Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsxs)(M.a,{htmlFor:"name",md:2,children:["Name"," "]}),Object(F.jsxs)(W.a,{md:4,children:[Object(F.jsx)(I.Control.text,{model:".name",id:"name",name:"name",placeholder:"Name of book",className:"form-control",validators:{required:je,minLength:ue(3),uniqueName:function(e){return!t.props.books.some((function(t){return t.name===e}))}}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".name",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters",uniqueName:" There exists a book with this name already"}})]}),Object(F.jsxs)(M.a,{htmlFor:"author",md:2,children:["Authors"," "]}),Object(F.jsxs)(W.a,{md:4,children:[Object(F.jsx)(I.Control.text,{model:".author",id:"author",name:"author",placeholder:"Name of authors",className:"form-control",validators:{required:je,minLength:ue(3)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".author",show:"touched",messages:{required:"Required",minLength:" Must be greater than 2 characters"}})]})]}),Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsx)(M.a,{htmlFor:"isbn",md:2,children:"ISBN No."}),Object(F.jsxs)(W.a,{md:4,children:[Object(F.jsx)(I.Control.text,{model:".isbn",id:"isbn",name:"isbn",placeholder:"ISBN no. of book",className:"form-control",validators:{required:je,minLength:ue(10),maxLength:(e=13,function(t){return!t||t.length<=e}),isNumber:Oe,uniqueIsbn:function(e){return!t.props.books.some((function(t){return t.isbn===e}))}}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".isbn",show:"touched",messages:{required:"Required",minLength:" Must be greater than 9 numbers",maxLength:" Must be 13 numbers or less",isNumber:" Must be a number",uniqueIsbn:" There exists a book with this ISBN No."}})]}),Object(F.jsxs)(M.a,{htmlFor:"copies",md:3,children:[" ","Copies Available"]}),Object(F.jsxs)(W.a,{md:3,children:[Object(F.jsx)(I.Control.text,{model:".copies",id:"copies",name:"copies",placeholder:"Number of copies available",className:"form-control",validators:{requiredNum:he,minVal:me(1),maxVal:be(1e3),isNumber:Oe}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".copies",show:"touched",messages:{requiredNum:"Required",minVal:" Must be greater than 0",maxVal:" Must be 1000 or less",isNumber:" Must be a number"}})]})]}),Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsxs)(W.a,{children:[Object(F.jsx)(M.a,{htmlFor:"cat",children:"Category"}),Object(F.jsxs)(I.Control.select,{defaultValue:"Romance",model:".cat",id:"cat",className:"form-control",children:[Object(F.jsx)("option",{children:"Romance"})," ",Object(F.jsx)("option",{children:"Technology"}),Object(F.jsx)("option",{children:"Computer Science"})," ",Object(F.jsx)("option",{children:"Management"}),Object(F.jsx)("option",{children:"Electronics"})," ",Object(F.jsx)("option",{children:"Physics"}),Object(F.jsx)("option",{children:"Chemistry"})," ",Object(F.jsx)("option",{children:"Mathematics"}),Object(F.jsx)("option",{children:"Fiction"})," ",Object(F.jsx)("option",{children:"Philosophy"}),Object(F.jsx)("option",{children:"Language"})," ",Object(F.jsx)("option",{children:"Arts"}),Object(F.jsx)("option",{children:"Other"})]})]}),Object(F.jsxs)(W.a,{children:[Object(F.jsx)(M.a,{htmlFor:"floor",children:"Floor "}),Object(F.jsxs)(I.Control.select,{defaultValue:0,model:".floor",id:"floor",className:"form-control",children:[Object(F.jsx)("option",{children:"0"})," ",Object(F.jsx)("option",{children:"1"}),Object(F.jsx)("option",{children:"2"})," ",Object(F.jsx)("option",{children:"3"}),Object(F.jsx)("option",{children:"4"})," ",Object(F.jsx)("option",{children:"5"}),Object(F.jsx)("option",{children:"6"})," ",Object(F.jsx)("option",{children:"7"}),Object(F.jsx)("option",{children:"8"})]})]})]}),Object(F.jsxs)(Z.a,{className:"form-group text-center justify-content-center",children:[Object(F.jsxs)(M.a,{htmlFor:"shelf",md:3,children:[" ","Shelf"]}),Object(F.jsxs)(W.a,{md:6,children:[Object(F.jsx)(I.Control.text,{model:".shelf",id:"shelf",name:"shelf",placeholder:"Shelf no. for locating book",className:"form-control",validators:{requiredNum:he,minVal:me(1),maxVal:be(100),isNumber:Oe}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".shelf",show:"touched",messages:{requiredNum:"Required",minVal:" Must be greater than 0",maxVal:" Must be 100 or less",isNumber:" Must be a number"}})]})]}),Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsx)(M.a,{htmlFor:"description",md:2,children:"Description"}),Object(F.jsx)(W.a,{md:10,children:Object(F.jsx)(I.Control.textarea,{model:".description",id:"description",name:"description",rows:"12",placeholder:"Some description of the book",className:"form-control"})})]}),Object(F.jsx)(Z.a,{className:"align-self-center",children:Object(F.jsx)(W.a,{className:"text-center",children:Object(F.jsx)(b.a,{type:"submit",className:"bg-primary",children:"Submit"})})})]})}),Object(F.jsx)("br",{})]})}}]),s}(r.Component),pe=0;function ge(e){var t=e.issue,s=e.i,r=[],a=new Date;r.push(a);var o=new Date(Date.parse(t.createdAt)),c=new Date(Date.parse(t.createdAt));c.setDate(c.getDate()+30),r.push(c);var i=t.returned?new Date(Date.parse(t.updatedAt)):new Date(Math.min.apply(null,r)),l=0;return(i.getTime()-o.getTime())/864e5>30&&(l=1*Math.floor((i.getTime()-o.getTime())/864e5)),pe+=l,Object(F.jsxs)(n.a.Fragment,{children:[Object(F.jsx)("td",{children:s}),Object(F.jsx)("td",{children:Object(F.jsx)(A.b,{to:"/books/".concat(t.book._id),children:t.book.name})}),Object(F.jsx)("td",{children:t.book.isbn}),Object(F.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(t.createdAt)))}),Object(F.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(c)}),Object(F.jsx)("td",{children:t.returned?"Returned on "+new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(i))):"Not returned yet"}),Object(F.jsx)("td",{children:l})]})}var fe=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(this.props.issues.isLoading)return Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})});if(this.props.issues.errMess)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.errMess})]})})});if(0===this.props.issues.issues.length)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12 text-center",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h4",{children:"You have not issued any books."}),Object(F.jsx)("h4",{children:"Request admin to issue a book"})]})})});var t=this.props.issues.issues.map((function(t){return Object(F.jsx)("tr",{children:Object(F.jsx)(ge,{issue:t,i:e.i++})},t._id)}));return Object(F.jsx)("div",{className:"container mt-6 text-center align-self-center full",children:Object(F.jsx)("div",{className:"row text-center justify-content-center",children:Object(F.jsxs)("div",{className:"col-12 heading",children:[Object(F.jsx)("h3",{children:"Issue History"}),Object(F.jsxs)(V.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:"S.No."}),Object(F.jsx)("th",{children:"Name of Book"}),Object(F.jsx)("th",{children:"ISBN number"}),Object(F.jsx)("th",{children:"Issue Date"}),Object(F.jsx)("th",{children:"Return Deadline"}),Object(F.jsx)("th",{children:"Return status"}),Object(F.jsx)("th",{children:"Fine (in Rs.)"})]})}),Object(F.jsx)("tbody",{children:t})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("h6",{children:[" ","Total Fine due (if all pending books are returned today) : Rs."," ",pe," "]}),Object(F.jsx)("br",{})]})})})}}]),s}(r.Component),ve=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={isbn:"",roll:""},r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(this.props.booksLoading||this.props.usersLoading)return Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})});if(this.props.booksErrMess)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.booksErrMess})]})})});if(this.props.usersErrMess)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.usersErrMess})]})})});var t=this.props.books.map((function(e,t){return Object(F.jsx)("option",{children:e.isbn},e.isbn)})),s=this.props.books[0],r=this.props.users.filter((function(e){return!e.admin})),n=r[0];return r=r.map((function(e,t){return Object(F.jsx)("option",{children:e.roll},e.roll)})),""===this.state.isbn&&this.setState({isbn:s.isbn,roll:n.roll}),Object(F.jsxs)("div",{className:"container full",children:[Object(F.jsx)("div",{className:"row justify-content-center heading",children:Object(F.jsx)("div",{className:"col-12",children:Object(F.jsx)("h3",{align:"center",children:" Issue book"})})}),Object(F.jsx)("div",{className:"row row-content justify-content-center",children:Object(F.jsxs)(w.a,{onSubmit:function(t){var s=e.props.books.filter((function(t){return t.isbn===e.state.isbn}))[0]._id,r=e.props.users.filter((function(t){return t.roll===e.state.roll}))[0]._id;e.props.postIssue(s,r),t.preventDefault()},children:[Object(F.jsxs)(y.a,{row:!0,children:[Object(F.jsx)(M.a,{htmlFor:"isbn",children:" ISBN No. of book"}),Object(F.jsx)(E.a,{type:"select",defaultValue:s.name,name:"isbn",id:"isbn",className:"form-control",onInput:function(t){e.setState({isbn:t.target.value})},children:t})]}),Object(F.jsxs)(y.a,{row:!0,children:[Object(F.jsx)(M.a,{htmlFor:"roll",children:" Roll No. of student "}),Object(F.jsx)(E.a,{type:"select",id:"roll",className:"form-control",onInput:function(t){e.setState({roll:t.target.value})},children:r})]}),Object(F.jsxs)(y.a,{row:!0,children:[Object(F.jsx)(M.a,{htmlFor:"name",children:" Name of book "}),Object(F.jsx)(E.a,{type:"text",id:"name",name:"name",placeholder:"Name of Book",defaultValue:s.name,value:this.state.isbn?this.props.books.filter((function(t){return t.isbn===e.state.isbn}))[0].name:"",className:"form-control",disabled:!0})]}),Object(F.jsxs)(y.a,{row:!0,children:[Object(F.jsx)(M.a,{htmlFor:"author",children:" Authors "}),Object(F.jsx)(E.a,{type:"text",id:"author",name:"author",placeholder:"Name of authors",defaultValue:s.author,value:this.state.isbn?this.props.books.filter((function(t){return t.isbn===e.state.isbn}))[0].author:"",className:"form-control",disabled:!0})]}),Object(F.jsxs)(y.a,{row:!0,children:[Object(F.jsx)(M.a,{htmlFor:"name_student",children:" Name of student "}),Object(F.jsx)(E.a,{type:"text",id:"name_student",name:"name_student",placeholder:"Name of student",defaultValue:n.firstname+" "+n.lastname,value:this.state.roll?this.props.users.filter((function(t){return t.roll===e.state.roll}))[0].firstname+" "+this.props.users.filter((function(t){return t.roll===e.state.roll}))[0].lastname:"",className:"form-control",disabled:!0})]}),Object(F.jsxs)(y.a,{row:!0,children:[Object(F.jsx)(M.a,{htmlFor:"username",children:" Username of student "}),Object(F.jsx)(E.a,{type:"text",id:"username",name:"username",placeholder:"Username of student",defaultValue:n.username,value:this.state.roll?this.props.users.filter((function(t){return t.roll===e.state.roll}))[0].username:"",className:"form-control",disabled:!0})]}),Object(F.jsx)(Z.a,{className:"align-self-center",children:Object(F.jsx)(W.a,{className:"text-center",children:Object(F.jsx)(b.a,{type:"submit",className:"bg-primary",children:"Submit"})})})]})}),Object(F.jsx)("br",{})]})}}]),s}(r.Component),Ne=0;function ke(e){var t=e.issue,s=e.i,r=e.returnBook,a=[],o=new Date;a.push(o);var c=new Date(Date.parse(t.createdAt)),i=new Date(Date.parse(t.createdAt));i.setDate(i.getDate()+30),a.push(i);var l=t.returned?new Date(Date.parse(t.updatedAt)):new Date(Math.min.apply(null,a)),d=0;return(l.getTime()-c.getTime())/864e5>30&&(d=1*Math.floor((l.getTime()-c.getTime())/864e5)),Ne+=d,Object(F.jsxs)(n.a.Fragment,{children:[Object(F.jsx)("td",{children:s}),Object(F.jsx)("td",{children:Object(F.jsx)(A.b,{to:"/users/".concat(t.student._id),children:t.student.firstname+" "+t.student.lastname})}),Object(F.jsx)("td",{children:t.student.roll}),Object(F.jsx)("td",{children:null==t.book?"N/A":Object(F.jsx)(A.b,{to:"/books/".concat(t.book._id),children:t.book.name})}),Object(F.jsx)("td",{children:null==t.book?"N/A":t.book.isbn}),Object(F.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(t.createdAt)))}),Object(F.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(i)}),Object(F.jsx)("td",{children:d}),Object(F.jsx)("td",{children:Object(F.jsx)(b.a,{color:"info",onClick:function(){r(t._id)},children:"Return"})})]})}var we=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(console.log(this.props.issues),this.props.issues.isLoading)return Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})});if(this.props.issues.errMess)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.errMess})]})})});if(0===this.props.issues.issues.length)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12 text-center",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h4",{children:"All books have been returned."})]})})});var t=this.props.issues.issues.filter((function(e){return!e.returned})).map((function(t){return Object(F.jsx)("tr",{children:Object(F.jsx)(ke,{issue:t,i:e.i++,returnBook:e.props.returnIssue})},t._id)}));return Object(F.jsx)("div",{className:"container mt-6 text-center align-self-center full",children:Object(F.jsx)("div",{className:"row text-center justify-content-center",children:Object(F.jsxs)("div",{className:"col-12 heading",children:[Object(F.jsx)("h3",{children:"List of books not returned"}),Object(F.jsxs)(V.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:"S.No."}),Object(F.jsx)("th",{children:"Name of Student"}),Object(F.jsx)("th",{children:"Roll No."}),Object(F.jsx)("th",{children:"Name of Book"}),Object(F.jsx)("th",{children:"ISBN number"}),Object(F.jsx)("th",{children:"Issue Date"}),Object(F.jsx)("th",{children:"Return Deadline"}),Object(F.jsx)("th",{children:"Fine (in Rs.)"}),Object(F.jsx)("th",{children:"Return book"})]})}),Object(F.jsx)("tbody",{children:t})]}),Object(F.jsx)("br",{}),Object(F.jsxs)("h6",{children:[" ","Total Fine due (if all pending books are returned today) : Rs."," ",Ne," "]}),Object(F.jsx)("br",{})]})})})}}]),s}(r.Component),ye=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.isLoading?Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})}):this.props.errMess?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.errMess})]})})}):Object(F.jsx)("div",{className:"container mt-6 home text-center align-self-center",children:Object(F.jsx)("div",{className:"row text-center justify-content-center",children:Object(F.jsxs)(Q.a,{className:"heading",children:[Object(F.jsx)(X.a,{children:Object(F.jsx)("h3",{children:"User Details"})}),Object(F.jsx)(ee.a,{children:Object(F.jsxs)(se.a,{children:[Object(F.jsxs)("h5",{children:[" ","First Name : ","          "+this.props.user.firstname]}),Object(F.jsxs)("h5",{children:[" ","Last Name : ","          "+this.props.user.lastname]}),Object(F.jsxs)("h5",{children:[" ",this.props.user.admin?"Admin ID":"Roll No."," :"," ","          "+this.props.user.roll]}),Object(F.jsxs)("h5",{children:[" Email : ","          "+this.props.user.email]}),Object(F.jsxs)("h5",{children:[" Username : ","          "+this.props.user.username]})]})})]})})})}}]),s}(r.Component),Me=s(218),Ee=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.issues.isLoading||this.props.booksLoading||this.props.usersLoading?Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})}):this.props.issues.errMess?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.issues.errMess})]})})}):this.props.usersErrMess?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.usersErrMess})]})})}):this.props.booksErrMess?Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.booksErrMess})]})})}):Object(F.jsxs)("div",{className:"container mt-6 text-center align-self-center full",children:[Object(F.jsx)("div",{className:"row text-center justify-content-center heading",children:Object(F.jsx)("div",{className:"col-12",children:Object(F.jsx)("h3",{children:"Stats"})})}),Object(F.jsxs)("div",{className:"row",children:[Object(F.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(F.jsx)(Q.a,{children:Object(F.jsxs)(ee.a,{children:[Object(F.jsx)(te.a,{children:Object(F.jsx)("h1",{children:this.props.books.length})}),Object(F.jsx)(se.a,{children:"Different books available"}),Object(F.jsx)(Me.a,{tag:A.b,to:"/books",children:Object(F.jsxs)(b.a,{color:"info",children:[Object(F.jsx)("i",{className:"fa fa-eye fa-lg"})," \xa0View"]})})]})})}),Object(F.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(F.jsx)(Q.a,{children:Object(F.jsxs)(ee.a,{children:[Object(F.jsx)(te.a,{children:Object(F.jsx)("h1",{children:this.props.issues.issues.length})}),Object(F.jsx)(se.a,{children:"Books Issued"}),Object(F.jsx)(Me.a,{tag:A.b,to:"/logs",children:Object(F.jsxs)(b.a,{color:"info",children:[Object(F.jsx)("i",{className:"fa fa-eye fa-lg"})," \xa0View"]})})]})})}),Object(F.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(F.jsx)(Q.a,{children:Object(F.jsxs)(ee.a,{children:[Object(F.jsx)(te.a,{children:Object(F.jsx)("h1",{children:this.props.issues.issues.filter((function(e){return!e.returned})).length})}),Object(F.jsx)(se.a,{children:"Books not yet returned"}),Object(F.jsx)(Me.a,{children:Object(F.jsxs)(b.a,{tag:A.b,to:"/return",color:"info",children:[Object(F.jsx)("i",{className:"fa fa-eye fa-lg"})," \xa0View"]})})]})})}),Object(F.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(F.jsx)(Q.a,{children:Object(F.jsxs)(ee.a,{children:[Object(F.jsx)(te.a,{children:Object(F.jsx)("h1",{children:this.props.users.filter((function(e){return!e.admin})).length})}),Object(F.jsx)(se.a,{children:"Students registered"}),Object(F.jsx)(Me.a,{tag:A.b,to:"/list_students",children:Object(F.jsxs)(b.a,{color:"info",children:[Object(F.jsx)("i",{className:"fa fa-eye fa-lg"})," \xa0View"]})})]})})}),Object(F.jsx)("div",{className:"col-12 col-md-6 col-xl-4 mt-4",children:Object(F.jsx)(Q.a,{children:Object(F.jsxs)(ee.a,{children:[Object(F.jsx)(te.a,{children:Object(F.jsx)("h1",{children:this.props.users.filter((function(e){return e.admin})).length})}),Object(F.jsx)(se.a,{children:"Administrators in-charge"}),Object(F.jsx)(Me.a,{tag:A.b,to:"/list_admins",children:Object(F.jsxs)(b.a,{color:"info",children:[Object(F.jsx)("i",{className:"fa fa-eye fa-lg"})," \xa0View"]})})]})})})]}),Object(F.jsx)("br",{})]})}}]),s}(r.Component);function Se(e){var t=e.issue,s=e.i,r=[],a=new Date;r.push(a);var o=new Date(Date.parse(t.createdAt)),c=new Date(Date.parse(t.createdAt));c.setDate(c.getDate()+30),r.push(c);var i=t.returned?new Date(Date.parse(t.updatedAt)):new Date(Math.min.apply(null,r)),l=0;return(i.getTime()-o.getTime())/864e5>30&&(l=1*Math.floor((i.getTime()-o.getTime())/864e5)),Object(F.jsxs)(n.a.Fragment,{children:[Object(F.jsx)("td",{children:s}),Object(F.jsx)("td",{children:Object(F.jsx)(A.b,{to:"/users/".concat(t.student._id),children:t.student.firstname+" "+t.student.lastname})}),Object(F.jsx)("td",{children:t.student.roll}),Object(F.jsx)("td",{children:null==t.book?"N/A":Object(F.jsx)(A.b,{to:"/books/".concat(t.book._id),children:t.book.name})}),Object(F.jsx)("td",{children:null==t.book?"N/A":t.book.isbn}),Object(F.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(t.createdAt)))}),Object(F.jsx)("td",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(c)}),Object(F.jsx)("td",{children:t.returned?"Returned on "+new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(i))):"Not returned yet"}),Object(F.jsx)("td",{children:l})]})}var Le=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(this.props.issues.isLoading)return Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})});if(this.props.issues.errMess)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.errMess})]})})});if(0===this.props.issues.issues.length)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12 text-center",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h4",{children:"You have not issued any books."}),Object(F.jsx)("h4",{children:"Request admin to issue a book"})]})})});var t=this.props.issues.issues.map((function(t){return Object(F.jsx)("tr",{children:Object(F.jsx)(Se,{issue:t,i:e.i++})},t._id)}));return Object(F.jsx)("div",{className:"container mt-6 text-center align-self-center full",children:Object(F.jsx)("div",{className:"row text-center justify-content-center",children:Object(F.jsxs)("div",{className:"col-12 heading",children:[Object(F.jsx)("h3",{children:"Issue Log"}),Object(F.jsxs)(V.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:"S.No."}),Object(F.jsx)("th",{children:"Name of Student"}),Object(F.jsx)("th",{children:"Roll No."}),Object(F.jsx)("th",{children:"Name of Book"}),Object(F.jsx)("th",{children:"ISBN number"}),Object(F.jsx)("th",{children:"Issue Date"}),Object(F.jsx)("th",{children:"Return Deadline"}),Object(F.jsx)("th",{children:"Return status"}),Object(F.jsx)("th",{children:"Fine (in Rs.)"})]})}),Object(F.jsx)("tbody",{children:t})]}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{})]})})})}}]),s}(r.Component);function Ce(e){var t=e.user,s=e.i;return Object(F.jsxs)(n.a.Fragment,{children:[Object(F.jsx)("td",{children:s}),Object(F.jsx)("td",{children:Object(F.jsx)(A.b,{to:"/users/".concat(t._id),children:t.firstname+" "+t.lastname})}),Object(F.jsx)("td",{children:t.roll}),Object(F.jsx)("td",{children:t.username}),Object(F.jsx)("td",{children:t.email})]})}var De=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={},r.i=1,r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;if(this.props.usersLoading)return Object(F.jsx)("div",{className:"container",children:Object(F.jsx)("div",{className:"row",children:Object(F.jsx)(J,{})})});if(this.props.usersErrMess)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h3",{children:this.props.errMess})]})})});if(0===this.props.users.length)return Object(F.jsx)("div",{className:"container loading",children:Object(F.jsx)("div",{className:"row heading",children:Object(F.jsxs)("div",{className:"col-12 text-center",children:[Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)("h4",{children:"No users found"})]})})});var t=this.props.users.map((function(t){return Object(F.jsx)("tr",{children:Object(F.jsx)(Ce,{user:t,i:e.i++})},t._id)}));return Object(F.jsx)("div",{className:"container mt-6 text-center align-self-center full",children:Object(F.jsx)("div",{className:"row text-center justify-content-center",children:Object(F.jsxs)("div",{className:"col-12 heading",children:[Object(F.jsxs)("h3",{children:["List of"," ",this.props.users[0].admin?" admins in-charge":" students registered"]}),Object(F.jsxs)(V.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[Object(F.jsx)("thead",{children:Object(F.jsxs)("tr",{children:[Object(F.jsx)("th",{children:"S.No."}),Object(F.jsxs)("th",{children:["Name of"," ",this.props.users[0].admin?" admin":" student"]}),Object(F.jsx)("th",{children:this.props.users[0].admin?" Admin Id":" Roll No."}),Object(F.jsx)("th",{children:"Username"}),Object(F.jsx)("th",{children:"Email"})]})}),Object(F.jsx)("tbody",{children:t})]}),Object(F.jsx)("br",{}),Object(F.jsx)("br",{})]})})})}}]),s}(r.Component),Ae=s(18),Ie=s(28),Fe="BOOKS_LOADING",Re="BOOKS_FAILED",Te="ADD_BOOKS",Be="ADD_BOOK",qe="EDIT_BOOK",_e="DELETE_BOOK",Ue="LOGIN_REQUEST",Pe="LOGIN_SUCCESS",Ve="LOGIN_FAILURE",Je="LOGOUT_REQUEST",Ke="LOGOUT_SUCCESS",Ye="EDIT_USER",Ge="EDIT_PASSWORD",ze="ISSUES_LOADING",Ze="ISSUES_FAILED",We="ADD_ISSUES",$e="ADD_ISSUE",He="RETURN_ISSUE",Qe="USERS_LOADING",Xe="USERS_FAILED",et="ADD_USERS",tt="https://lims-skit.herokuapp.com/api/",st=function(e,t,s,r,n,a,o,c){return function(i){var l={name:e,author:t,description:s,isbn:r,cat:n,floor:a,shelf:o,copies:c},d="Bearer "+localStorage.getItem("token");return fetch(tt+"books",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json",Authorization:d}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return alert("Book added successfully"),i({type:Be,payload:e})})).catch((function(e){alert("Your book could not be added\nError: "+e.message)}))}},rt=function(){return function(e){var t="Bearer "+localStorage.getItem("token");return e(it(!0)),fetch(tt+"users",{headers:{Authorization:t}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(ct(t))})).catch((function(t){return e(ft(t.message))}))}},nt=function(){return{type:Fe}},at=function(e){return{type:Re,payload:e}},ot=function(e){return{type:Te,payload:e}},ct=function(e){return{type:et,payload:e}},it=function(){return{type:Qe}},lt=function(e){return{type:qe,payload:e}},dt=function(e){return{type:Ye,payload:e}},jt=function(e){return{type:Ge,payload:e}},ht=function(e){return{type:_e,payload:e}},ut=function(e){return function(t){return t(function(e){return{type:Ue,creds:e}}(e)),fetch(tt+"users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(s){if(!s.success){var r=new Error("Error "+s.status);throw r.response=s,r}localStorage.setItem("token",s.token),localStorage.setItem("creds",JSON.stringify(e)),localStorage.setItem("userinfo",JSON.stringify(s.userinfo)),t(Ot(!s.userinfo.admin)),s.userinfo.admin&&t(rt()),setTimeout((function(){vt(),alert("Your JWT token has expired. \nPlease log in again to continue.")}),36e5),t(function(e){return{type:Pe,token:e.token,userinfo:e.userinfo}}(s))})).catch((function(e){return alert(e.message+"\nUsername and password didn't match"),t((s=e.message,{type:Ve,message:s}));var s}))}},bt=function(e,t){return function(s){var r={book:e,student:t},n="Bearer "+localStorage.getItem("token");return fetch(tt+"issues",{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:n}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return alert("Book issued successfully"),s({type:$e,payload:e})})).catch((function(e){alert("Book could not be issued\nError: "+e.message+"\nMay be the student has already issued 3 books and not returned. Please return them first. \nor the book may not available. You can wait for some days, until the book is returned to library.")}))}},mt=function(e){return function(t){var s="Bearer "+localStorage.getItem("token");return fetch(tt+"issues/"+e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:s}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return alert("Book returned successfully"),t({type:He,payload:e})})).catch((function(e){alert("The book could not be returned\nError: "+e.message)}))}},Ot=function(e){return function(t){var s,r="Bearer "+localStorage.getItem("token");return s=e?"issues/student":"issues",t(xt(!0)),fetch(tt+s,{headers:{Authorization:r}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(e){return t(gt(e))})).catch((function(e){return t(pt(e.message))}))}},xt=function(){return{type:ze}},pt=function(e){return{type:Ze,payload:e}},gt=function(e){return{type:We,payload:e}},ft=function(e){return{type:Xe,payload:e}},vt=function(){return function(e){e({type:Je}),localStorage.removeItem("token"),localStorage.removeItem("creds"),localStorage.removeItem("userinfo"),e({type:Ke})}};s(187);var Nt=function(){return Object(F.jsx)("div",{className:"about-main",children:Object(F.jsxs)("div",{className:"about-background",children:[Object(F.jsxs)("div",{className:"about-content",children:[Object(F.jsx)("h1",{children:"Library Manangement System"}),Object(F.jsx)("p",{children:"It is software that is designed to manage all the functions of a library. It helps librarian to maintain the database of new books and the books that are borrowed by students along with their due dates. It also helps students in finding books and check status of issued books."})]}),Object(F.jsx)("h2",{children:"Designed & Developed By: "}),Object(F.jsxs)("div",{className:"about-developed",children:[Object(F.jsxs)("div",{className:"developer-div",children:[Object(F.jsx)("img",{className:"developer-logo",src:"arunabh-dp.png",alt:""}),Object(F.jsx)("h3",{children:"Arunabh Jain"}),Object(F.jsx)("h4",{children:"19ESKCS046"})]}),Object(F.jsxs)("div",{className:"developer-div",children:[Object(F.jsx)("img",{className:"developer-logo",src:"aryan-dp.png",alt:""}),Object(F.jsx)("h3",{children:"Aryan Sharma"}),Object(F.jsx)("h4",{children:"19ESKCS047"})]}),Object(F.jsxs)("div",{className:"developer-div",children:[Object(F.jsx)("img",{className:"developer-logo",src:"anshika-dp.png",alt:""}),Object(F.jsx)("h3",{children:"Anshika Mittal"}),Object(F.jsx)("h4",{children:"19ESKCS038"})]}),Object(F.jsxs)("div",{className:"developer-div",children:[Object(F.jsx)("img",{className:"developer-logo",src:"aman-dp.png",alt:""}),Object(F.jsx)("h3",{children:"Aman Jain"}),Object(F.jsx)("h4",{children:"19ESKCS032"})]})]})]})})},kt=["component"],wt=["component"],yt=["component"],Mt=function(e){return e&&e.length},Et=function(e){return!!e},St=function(e){return function(t){return t&&t.length>=e}},Lt=function(e){return function(t){return!t||t<=e}},Ct=function(e){return function(t){return t&&t>=e}},Dt=function(e){return!isNaN(Number(e))},At=function(e){Object(h.a)(s,e);var t=Object(u.a)(s);function s(e){var r;return Object(l.a)(this,s),(r=t.call(this,e)).state={isDeleteModalOpen:!1,isEditModalOpen:!1,selectedBook:null},r.toggleDeleteModal=r.toggleDeleteModal.bind(Object(j.a)(r)),r.toggleEditModal=r.toggleEditModal.bind(Object(j.a)(r)),r.changeSelected=r.changeSelected.bind(Object(j.a)(r)),r.handleSubmitEdit=r.handleSubmitEdit.bind(Object(j.a)(r)),r}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.props.fetchBooks(),this.props.auth.isAuthenticated&&this.props.fetchIssues(!this.props.auth.userinfo.admin),this.props.auth.isAuthenticated&&this.props.auth.userinfo.admin&&this.props.fetchUsers()}},{key:"handleSubmitEdit",value:function(e){this.toggleEditModal(),this.props.editBook(this.state.selectedBook._id,e.name,e.author,e.description,e.isbn,e.cat,e.floor,e.shelf,e.copies)}},{key:"changeSelected",value:function(e){this.setState({selectedBook:this.props.books.books.filter((function(t){return t._id===e}))[0]})}},{key:"toggleDeleteModal",value:function(){this.setState({isDeleteModalOpen:!this.state.isDeleteModalOpen})}},{key:"toggleEditModal",value:function(){this.setState({isEditModalOpen:!this.state.isEditModalOpen})}},{key:"render",value:function(){var e,t,s,a=this,o=function(e){var t=e.component,s=Object(i.a)(e,kt);return Object(F.jsx)(Ae.b,Object(c.a)(Object(c.a)({},s),{},{render:function(e){return a.props.auth.isAuthenticated?Object(F.jsx)(t,Object(c.a)({},e)):Object(F.jsx)(Ae.a,{to:{pathname:"/home",state:{from:e.location}}})}}))},l=function(e){var t=e.component,s=Object(i.a)(e,wt);return Object(F.jsx)(Ae.b,Object(c.a)(Object(c.a)({},s),{},{render:function(e){return a.props.auth.isAuthenticated&&a.props.auth.userinfo.admin?Object(F.jsx)(t,Object(c.a)({},e)):Object(F.jsx)(Ae.a,{to:{pathname:"/home",state:{from:e.location}}})}}))},d=function(e){var t=e.component,s=Object(i.a)(e,yt);return Object(F.jsx)(Ae.b,Object(c.a)(Object(c.a)({},s),{},{render:function(e){return a.props.auth.isAuthenticated&&!a.props.auth.userinfo.admin?Object(F.jsx)(t,Object(c.a)({},e)):Object(F.jsx)(Ae.a,{to:{pathname:"/home",state:{from:e.location}}})}}))};return Object(F.jsxs)(r.Fragment,{children:[Object(F.jsx)(U,{auth:this.props.auth,loginUser:this.props.loginUser,logoutUser:this.props.logoutUser,registerUser:this.props.registerUser}),Object(F.jsxs)(Ae.d,{location:this.props.location,children:[Object(F.jsx)(Ae.b,{exact:!0,path:"/home",component:function(){return Object(F.jsx)(P,{})}}),Object(F.jsx)(Ae.b,{exact:!0,path:"/about",component:function(){return Object(F.jsx)(Nt,{})}}),Object(F.jsx)(Ae.b,{exact:!0,path:"/search",component:function(){return Object(F.jsx)(H,{books:a.props.books.books,booksLoading:a.props.books.isLoading,booksErrMess:a.props.books.errMess,isSignedIn:a.props.auth.isAuthenticated,isAdmin:null!=a.props.auth.userinfo&&a.props.auth.userinfo.admin,toggleEditModal:a.toggleEditModal,toggleDeleteModal:a.toggleDeleteModal,changeSelected:a.changeSelected})}}),Object(F.jsx)(Ae.b,{exact:!0,path:"/books",component:function(){return Object(F.jsx)(Y,{books:a.props.books.books,booksLoading:a.props.books.isLoading,booksErrMess:a.props.books.errMess,isSignedIn:a.props.auth.isAuthenticated,isAdmin:null!=a.props.auth.userinfo&&a.props.auth.userinfo.admin,auth:a.props.auth,toggleEditModal:a.toggleEditModal,toggleDeleteModal:a.toggleDeleteModal,changeSelected:a.changeSelected})}}),Object(F.jsx)(Ae.b,{path:"/books/:bookId",component:function(e){var t=e.match,s=a.props.books.books.filter((function(e){return e._id===t.params.bookId}))[0],r=null;return void 0===s&&(r="\n\n Error 404 :  Book not found"),Object(F.jsx)(ae,{book:s,isLoading:a.props.books.isLoading,errMess:a.props.books.errMess||r,toggleEditModal:a.toggleEditModal,changeSelected:a.changeSelected,isAdmin:null!=a.props.auth.userinfo&&a.props.auth.userinfo.admin})}}),Object(F.jsx)(o,{exact:!0,path:"/profile",component:function(){return Object(F.jsx)(de,{auth:a.props.auth,editUser:a.props.editUser,editPassword:a.props.editPassword})}}),Object(F.jsx)(l,{exact:!0,path:"/add_book",component:function(){return Object(F.jsx)(xe,{isAdmin:null!=a.props.auth.userinfo&&a.props.auth.userinfo.admin,postBook:a.props.postBook,books:a.props.books.books,booksLoading:a.props.books.isLoading,booksErrMess:a.props.books.errMess})}}),Object(F.jsx)(d,{exact:!0,path:"/profile",component:function(){return Object(F.jsx)(de,{auth:a.props.auth,editUser:a.props.editUser})}}),Object(F.jsx)(d,{exact:!0,path:"/history",component:function(){return Object(F.jsx)(fe,{issues:a.props.issues,auth:a.props.auth})}}),Object(F.jsx)(l,{exact:!0,path:"/logs",component:function(){return Object(F.jsx)(Le,{issues:a.props.issues})}}),Object(F.jsx)(l,{exact:!0,path:"/list_students",component:function(){return Object(F.jsx)(De,{users:a.props.users.users.filter((function(e){return!e.admin})),usersLoading:a.props.users.isLoading,usersErrMess:a.props.users.errMess})}}),Object(F.jsx)(l,{exact:!0,path:"/list_admins",component:function(){return Object(F.jsx)(De,{users:a.props.users.users.filter((function(e){return e.admin})),usersLoading:a.props.users.isLoading,usersErrMess:a.props.users.errMess})}}),Object(F.jsx)(l,{exact:!0,path:"/issue",component:function(){return Object(F.jsx)(ve,{auth:a.props.auth,books:a.props.books.books,booksLoading:a.props.books.isLoading,booksErrMess:a.props.books.errMess,users:a.props.users.users,usersLoading:a.props.users.isLoading,usersErrMess:a.props.users.errMess,postIssue:a.props.postIssue})}}),Object(F.jsx)(l,{exact:!0,path:"/return",component:function(){return Object(F.jsx)(we,{issues:a.props.issues,auth:a.props.auth,returnIssue:a.props.returnIssue})}}),Object(F.jsx)(l,{path:"/users/:userId",component:function(e){var t=e.match,s=a.props.users.users.filter((function(e){return e._id===t.params.userId}))[0],r=null;return void 0===s&&(r="\n\n Error 404 :  User not found"),Object(F.jsx)(ye,{user:s,isLoading:a.props.users.isLoading,errMess:a.props.users.errMess||r})}}),Object(F.jsx)(l,{path:"/stats",component:function(){return Object(F.jsx)(Ee,{issues:a.props.issues,books:a.props.books.books,booksLoading:a.props.books.isLoading,booksErrMess:a.props.books.errMess,users:a.props.users.users,usersLoading:a.props.users.isLoading,usersErrMess:a.props.users.errMess})}}),Object(F.jsx)(Ae.a,{to:"/home"})]}),Object(F.jsxs)(v.a,{isOpen:this.state.isDeleteModalOpen,toggle:this.toggleDeleteModal,children:[Object(F.jsx)(N.a,{toggle:this.toggleDeleteModal,children:"Confirm Deletion"}),Object(F.jsxs)(k.a,{children:["Book details : ",Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),"Name : ",this.state.selectedBook?this.state.selectedBook.name:""," ",Object(F.jsx)("br",{}),"Authors :"," ",this.state.selectedBook?this.state.selectedBook.author:""," ",Object(F.jsx)("br",{}),"ISBN Number :"," ",this.state.selectedBook?this.state.selectedBook.isbn:""," ",Object(F.jsx)("br",{}),"Available Copies :"," ",this.state.selectedBook?this.state.selectedBook.copies:""," ",Object(F.jsx)("br",{})," ",Object(F.jsx)("br",{}),"Are you sure you wish to delete this book ? ",Object(F.jsx)("br",{}),Object(F.jsx)("br",{}),Object(F.jsx)(b.a,{color:"danger",onClick:function(){a.props.deleteBook(a.state.selectedBook._id),a.toggleDeleteModal()},children:"Yes"})," ",Object(F.jsx)(b.a,{color:"warning",onClick:function(){a.toggleDeleteModal()},children:"No"})]})]}),this.state.selectedBook?Object(F.jsxs)(v.a,{isOpen:this.state.isEditModalOpen,toggle:this.toggleEditModal,children:[Object(F.jsx)(N.a,{toggle:this.toggleEditModal,children:"Edit a book"}),Object(F.jsx)(k.a,{children:Object(F.jsxs)(I.LocalForm,{onSubmit:function(e){return a.handleSubmitEdit(e)},children:[Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsxs)(M.a,{htmlFor:"name",md:2,children:["Name"," "]}),Object(F.jsxs)(W.a,{md:10,children:[Object(F.jsx)(I.Control.text,{model:".name",id:"name",name:"name",defaultValue:this.state.selectedBook.name,className:"form-control",validators:{required:Mt,minLength:St(3),uniqueName:(s=this.state.selectedBook.name,function(e){return!a.props.books.books.some((function(t){return t.name===e}))||e===s})}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".name",show:"touched",messages:{required:"Required",minLength:"Must be greater than 2 characters",uniqueName:" There exists a book with this name already"}})]})]}),Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsxs)(M.a,{htmlFor:"author",md:2,children:["Authors"," "]}),Object(F.jsxs)(W.a,{md:10,children:[Object(F.jsx)(I.Control.text,{model:".author",id:"author",name:"author",defaultValue:this.state.selectedBook.author,className:"form-control",validators:{required:Mt,minLength:St(3)}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".author",show:"touched",messages:{required:"Required",minLength:"Must be greater than 2 characters"}})]})]}),Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsx)(M.a,{htmlFor:"isbn",md:4,children:"ISBN No."}),Object(F.jsxs)(W.a,{md:8,children:[Object(F.jsx)(I.Control.text,{model:".isbn",id:"isbn",name:"isbn",defaultValue:this.state.selectedBook.isbn,className:"form-control",validators:{required:Mt,minLength:St(10),maxLength:(t=13,function(e){return!e||e.length<=t}),isNumber:Dt,uniqueIsbn:(e=this.state.selectedBook.isbn,function(t){return!a.props.books.books.some((function(e){return e.isbn===t}))||t===e})}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".isbn",show:"touched",messages:{required:"Required",minLength:"Must be greater than 9 numbers",maxLength:"Must be 13 numbers or less",isNumber:"Must be a number",uniqueIsbn:" There exists a book with this ISBN No."}})]})]}),Object(F.jsx)(Z.a,{className:"form-group",children:Object(F.jsxs)(W.a,{children:[Object(F.jsx)(M.a,{htmlFor:"cat",children:"Category"}),Object(F.jsxs)(I.Control.select,{model:".cat",id:"cat",className:"form-control",defaultValue:this.state.selectedBook.cat,children:[Object(F.jsx)("option",{children:"Romance"})," ",Object(F.jsx)("option",{children:"Technology"}),Object(F.jsx)("option",{children:"Computer Science"})," ",Object(F.jsx)("option",{children:"Management"}),Object(F.jsx)("option",{children:"Electronics"})," ",Object(F.jsx)("option",{children:"Physics"}),Object(F.jsx)("option",{children:"Chemistry"})," ",Object(F.jsx)("option",{children:"Mathematics"}),Object(F.jsx)("option",{children:"Fiction"})," ",Object(F.jsx)("option",{children:"Philosophy"}),Object(F.jsx)("option",{children:"Language"})," ",Object(F.jsx)("option",{children:"Arts"}),Object(F.jsx)("option",{children:"Other"})]})]})}),Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsxs)(M.a,{htmlFor:"copies",md:6,children:[" ","Copies Available"]}),Object(F.jsxs)(W.a,{md:6,children:[Object(F.jsx)(I.Control.text,{model:".copies",id:"copies",name:"copies",defaultValue:this.state.selectedBook.copies,className:"form-control",validators:{requiredNum:Et,minVal:Ct(1),maxVal:Lt(1e3),isNumber:Dt}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".copies",messages:{requiredNum:"Required",minVal:"Must be greater than 0",maxVal:"Must be 1000 or less",isNumber:"Must be a number"}})]})]}),Object(F.jsx)(Z.a,{className:"form-group",children:Object(F.jsxs)(W.a,{children:[Object(F.jsx)(M.a,{htmlFor:"floor",children:"Floor "}),Object(F.jsxs)(I.Control.select,{model:".floor",id:"floor",className:"form-control",defaultValue:this.state.selectedBook.floor,children:[Object(F.jsx)("option",{children:"0"})," ",Object(F.jsx)("option",{children:"1"}),Object(F.jsx)("option",{children:"2"})," ",Object(F.jsx)("option",{children:"3"}),Object(F.jsx)("option",{children:"4"})," ",Object(F.jsx)("option",{children:"5"}),Object(F.jsx)("option",{children:"6"})," ",Object(F.jsx)("option",{children:"7"}),Object(F.jsx)("option",{children:"8"})]})]})}),Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsxs)(M.a,{htmlFor:"shelf",md:6,children:[" ","Shelf"]}),Object(F.jsxs)(W.a,{md:6,children:[Object(F.jsx)(I.Control.text,{model:".shelf",id:"shelf",name:"shelf",defaultValue:this.state.selectedBook.shelf,className:"form-control",validators:{requiredNum:Et,minVal:Ct(1),maxVal:Lt(100),isNumber:Dt}}),Object(F.jsx)(I.Errors,{className:"text-danger",model:".shelf",messages:{requiredNum:"Required",minVal:"Must be greater than 0",maxVal:"Must be 100 or less",isNumber:"Must be a number"}})]})]}),Object(F.jsxs)(Z.a,{className:"form-group",children:[Object(F.jsx)(M.a,{htmlFor:"description",md:2,children:"Description"}),Object(F.jsx)(W.a,{md:10,children:Object(F.jsx)(I.Control.textarea,{model:".description",id:"description",name:"description",rows:"12",defaultValue:this.state.selectedBook.description,className:"form-control"})})]}),Object(F.jsx)(Z.a,{children:Object(F.jsx)(W.a,{className:"ml-auto mr-auto",children:Object(F.jsx)(b.a,{type:"submit",className:"bg-primary",children:"Submit"})})})]})})]}):Object(F.jsx)(n.a.Fragment,{})]})}}]),s}(r.Component),It=Object(Ae.g)(Object(Ie.connect)((function(e){return{books:e.books,auth:e.auth,issues:e.issues,users:e.users}}),(function(e){return{fetchBooks:function(){e((function(e){return e(nt(!0)),fetch(tt+"books").then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw new Error(e.message)})).then((function(e){return e.json()})).then((function(t){return e(ot(t))})).catch((function(t){return e(at(t.message))}))}))},fetchIssues:function(t){e(Ot(t))},fetchUsers:function(){e(rt())},postBook:function(t,s,r,n,a,o,c,i){return e(st(t,s,r,n,a,o,c,i))},editBook:function(t,s,r,n,a,o,c,i,l){return e(function(e,t,s,r,n,a,o,c,i){return function(l){var d={name:t,author:s,description:r,isbn:n,cat:a,floor:o,shelf:c,copies:i},j="Bearer "+localStorage.getItem("token");return fetch(tt+"books/"+e,{method:"PUT",body:JSON.stringify(d),headers:{"Content-Type":"application/json",Authorization:j}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return l(lt(e))})).catch((function(e){alert("Your book could not be edited\nError: "+e.message)}))}}(t,s,r,n,a,o,c,i,l))},deleteBook:function(t){return e(function(e){return function(t){var s="Bearer "+localStorage.getItem("token");return fetch(tt+"books/"+e,{method:"DELETE",headers:{Authorization:s}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return t(ht(e))})).catch((function(e){alert("Your book could not be deleted\nError: "+e.message)}))}}(t))},loginUser:function(t){return e(ut(t))},logoutUser:function(){return e(vt())},registerUser:function(t){return e(function(e){return function(t){return fetch(tt+"users/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){if(!e.success){var t=new Error("Error "+e.status);throw t.response=e,t}alert("Registration Successful")})).catch((function(e){return alert(e.message+"\nMay be someone has already registered with that username, email or Roll No.\nTry Entering a new username,email or Roll No. ")}))}}(t))},editUser:function(t,s,r,n,a){return e(function(e,t,s,r,n){return function(a){var o={firstname:t,lastname:s,roll:r,email:n},c="Bearer "+localStorage.getItem("token");return fetch(tt+"users/"+e,{method:"PUT",body:JSON.stringify(o),headers:{"Content-Type":"application/json",Authorization:c}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return localStorage.removeItem("userinfo"),localStorage.setItem("userinfo",JSON.stringify(e)),a(dt(e))})).catch((function(e){alert("Your profile could not be edited\nError: "+e.message+"\n May be someone has already registered with that Roll No. or Email")}))}}(t,s,r,n,a))},editPassword:function(t,s,r){return e(function(e,t,s){return function(r){var n="Bearer "+localStorage.getItem("token");return fetch(tt+"users/password/"+e,{method:"PUT",body:JSON.stringify({password:s}),headers:{"Content-Type":"application/json",Authorization:n}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.statusText+"\n ");throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){var n={username:t,password:s};return localStorage.removeItem("creds"),localStorage.setItem("creds",JSON.stringify(n)),alert("Password changed successfully"),r(jt(n))})).catch((function(e){alert("Your password could not be changed\nError: "+e.message)}))}}(t,s,r))},postIssue:function(t,s){return e(bt(t,s))},returnIssue:function(t){return e(mt(t))}}}))(At)),Ft=s(33),Rt=s(111),Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,books:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,errMess:null,books:t.payload});case Fe:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!0,errMess:null,books:[]});case Re:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,errMess:t.payload});case Be:var s=t.payload;return Object(c.a)(Object(c.a)({},e),{},{books:e.books.concat(s)});case qe:var r=t.payload;return Object(c.a)(Object(c.a)({},e),{},{books:e.books.map((function(e){return e._id===r._id?r:e}))});case _e:var n=t.payload;return Object(c.a)(Object(c.a)({},e),{},{books:e.books.filter((function(e){return e._id!==n._id}))});default:return e}},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1,isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token"),user:localStorage.getItem("creds")?JSON.parse(localStorage.getItem("creds")):null,userinfo:localStorage.getItem("userinfo")?JSON.parse(localStorage.getItem("userinfo")):null,errMess:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!0,isAuthenticated:!1,user:t.creds});case Pe:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,isAuthenticated:!0,errMess:"",token:t.token,userinfo:t.userinfo});case Ve:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,isAuthenticated:!1,errMess:t.message});case Je:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!0,isAuthenticated:!0});case Ke:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,isAuthenticated:!1,token:"",user:null,userinfo:null});case Ye:return Object(c.a)(Object(c.a)({},e),{},{userinfo:t.payload});case Ge:return Object(c.a)(Object(c.a)({},e),{},{user:t.payload});default:return e}},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,issues:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,errMess:null,issues:t.payload});case ze:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!0,errMess:null,issues:[]});case Ze:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,errMess:t.payload});case $e:var s=t.payload;return Object(c.a)(Object(c.a)({},e),{},{issues:e.issues.concat(s)});case He:var r=t.payload;return Object(c.a)(Object(c.a)({},e),{},{issues:e.issues.map((function(e){return e._id===r._id?r:e}))});default:return e}},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,errMess:null,users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case et:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,errMess:null,users:t.payload});case Qe:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!0,errMess:null,users:[]});case Xe:return Object(c.a)(Object(c.a)({},e),{},{isLoading:!1,errMess:t.payload});default:return e}},Ut=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ft.compose,Pt=(s(188),s(189),s(190),Object(Ft.createStore)(Object(Ft.combineReducers)({books:Tt,auth:Bt,issues:qt,users:_t}),Ut(Object(Ft.applyMiddleware)(Rt.a))));var Vt=function(){return Object(F.jsx)(Ie.Provider,{store:Pt,children:Object(F.jsx)(A.a,{children:Object(F.jsx)(It,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(F.jsx)(Vt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[191,1,2]]]);
//# sourceMappingURL=main.7b683d14.chunk.js.map